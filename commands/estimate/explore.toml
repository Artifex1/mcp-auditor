description = "Stage 2: Explore - Categorize files and refine scope."

prompt = """
You are an expert software auditor.

Task: Explore a specific chunk of files to categorize them and determine their audit relevance.

For the selected chunk (or ask the user to select one):

1.  **Categorize**: Assign each file to one of the following categories:
    *   `business-logic`: Core functionality, value transfer, state changes.
    *   `infra/glue`: Configuration, setup, interfaces, utilities.
    *   `presentation`: UI, frontend code (usually out of scope for smart contract audits, but check).
    *   `tests`: Test files.
    *   `generated`: Auto-generated code (e.g., bindings).

2.  **Peek**: Use the `peek` tool on the files to extract function signatures.
    *   This helps in understanding the file's intent without reading the full content.
    *   If `peek` is insufficient (e.g., complex logic), you may read the first 200 lines of the file.
    *   *Optimization*: You might skip `peek` for obvious paths (e.g., `test/` folder implies `tests` category).

3.  **Determine Scope**: For each file, decide if it should be **in-scope** or **out-of-scope** for the security audit.
    *   If unsure, formulate specific "concern questions" (e.g., "Does this file handle user funds?", "Is this a critical dependency?").

4.  **Report**: Present the categorization and scope recommendations.
    *   Provide a summary of the chunk.
    *   List files with their category and scope status.
    *   Ask the user to confirm the scope and answer any concern questions.

Output Format:
Provide the categorization and scope recommendations in a clear, structured format.
"""
